# アセンブリ言語

## 4-arch.pdf

- アドレス空間

メモリのすべてのアドレスの集合。32bitアドレス空間は$2^{32}-1$番地まで理論上は使えるので、理論上4GB分のメモリを扱えるということ

ただし、アドレス空間とは現実に存在するアドレスに必ずしも対応しているわけではない。あくまで、理論上の空間

- メモリアクセス

`movb 1000, %al` : レジスタ`%al`に1000番地にある値をコピーする。

- レジスタ

CPU内に存在する少量でとても高速なメモリ   
レジスタにはアドレスがなく、名前で指定する。`%rax`とか

- プログラムカウンタ  
program counter `%rip`   
次に実行する機械語命令のアドレスを保持する。通常の実行では、次の命令にを指すように値が増加する。（フェッチ実行サイクル（＝データをとってきて、それを実行するという一連のサイクルのこと）の中で、制御装置が自動的に加算を行う。）

プログラムカウンタ(`%rip`)に対して、直接`movq`命令でアクセスすることはできない。もっと具体的には

`movq $0x12345678, %rip`のように、値`0x12345678`を`%rip`(=プログラムカウンタ)にコピーするということはできない。しかし、アクセスできないのは、不便なので間接的に以下の制御命令でアクセス可能

  - jmp命令
  - jcc命令
  - call命令
  - ret命令

- ステータスレジスタ `%rflags`

演算結果の状態を自動的にビット毎に保持する。具体的には、オーバーフロー、キャリー、演算結果の正負や真偽などである。このステータスレジスタについては、プログラマは基本的に、read only(読み込むだけ)である。主に`条件付きジャンプ`につかう。

  - 有名なステータスレジスタ一覧 `%rflags`
    - CF   
    キャリーフラグ：算術演算で結果の最上位ビットにキャリーかボローが生じるとセット、それ以外はクリア   
    （符号なし整数演算ではオーバーフロー状態を表す。）

    - OF   
    オーバーフローフラグ: 符号ビットを除いて、整数の演算結果が大きすぎるか、小さすぎるとセット、それ以外はクリア  
    2の補数の符号あり整数演算でのオーバーフロー状態を表す。

    - ZF   
    結果がゼロのときにセット、それ以外はクリア

## 5-insn1.pdf

### CISC と RISC

- CISC: Complex Instruction Set Computer   
1つの命令で複雑な（複数の）処理を行う。直行性が低い(= 色々と例外とか場合によって複雑な条件がある。)

